@page
@model FootballScoutApp.Areas.Identity.Pages.Account.Manage.PlayerProfileModel
@{
    ViewData["Title"] = "Player Profile";
}

<h1>@ViewData["Title"]</h1>
<h4>Manage your player profile information.</h4>
<hr />
<div class="row">
    <div class="col-md-6">
        <form method="post">
            <div asp-validation-summary="All" class="text-danger"></div>

            <!-- Personal Information Section -->
            <div class="form-group">
                <label asp-for="Input.Firstname"></label>
                <input asp-for="Input.Firstname" class="form-control" readonly />
            </div>
            <div class="form-group">
                <label asp-for="Input.Lastname"></label>
                <input asp-for="Input.Lastname" class="form-control" readonly />
            </div>
            <div class="form-group">
                <label asp-for="Input.DateOfBirth"></label>
                <input asp-for="Input.DateOfBirth" class="form-control" type="date" />
                <span asp-validation-for="Input.DateOfBirth" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Input.Nationality"></label>
                <input asp-for="Input.Nationality" class="form-control" />
                <span asp-validation-for="Input.Nationality" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Input.Birthplace"></label>
                <input asp-for="Input.Birthplace" class="form-control" />
                <span asp-validation-for="Input.Birthplace" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Input.Bio"></label>
                <textarea asp-for="Input.Bio" class="form-control"></textarea>
                <span asp-validation-for="Input.Bio" class="text-danger"></span>
            </div>


            <!-- Player Information Section -->
            <!-- Player Information Section -->
            <div class="form-group">
                <label asp-for="Input.Position"></label>
                <select asp-for="Input.Position" class="form-control">
                    <option value="">Select Position</option>
                    <option value="Goalkeeper">Goalkeeper</option>
                    <option value="Defender">Defender</option>
                    <option value="Midfielder">Midfielder</option>
                    <option value="Forward">Forward</option>
                </select>
                <span asp-validation-for="Input.Position" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Input.PreferredFoot"></label>
                <select asp-for="Input.PreferredFoot" class="form-control">
                    <option value="">Select Preferred Foot</option>
                    <option value="Right">Right</option>
                    <option value="Left">Left</option>
                    <option value="Both">Both</option>
                </select>
                <span asp-validation-for="Input.PreferredFoot" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Input.Height"></label>
                <input asp-for="Input.Height" class="form-control" />
                <span asp-validation-for="Input.Height" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Input.Weight"></label>
                <input asp-for="Input.Weight" class="form-control" />
                <span asp-validation-for="Input.Weight" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Input.InjuryHistory"></label>
                <textarea asp-for="Input.InjuryHistory" class="form-control"></textarea>
                <span asp-validation-for="Input.InjuryHistory" class="text-danger"></span>
            </div>

            <!-- Previous Clubs Section -->
            <div class="form-group">
                <label>Previous Clubs</label>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Club Name</th>
                            <th>Year From</th>
                            <th>Year To</th>
                            <th>Appearances</th>
                            <th>Goals</th>
                            <th>Clean Sheets</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (int i = 0; i < Model.Input.PreviousClubs.Count; i++)
                        {
                            <tr>
                                <td><input asp-for="Input.PreviousClubs[@i].ClubName" class="form-control" /></td>
                                <td><input asp-for="Input.PreviousClubs[@i].YearFrom" class="form-control" type="number" /></td>
                                <td><input asp-for="Input.PreviousClubs[@i].YearTo" class="form-control" type="number" /></td>
                                <td><input asp-for="Input.PreviousClubs[@i].Appearances" class="form-control" /></td>
                                <td><input asp-for="Input.PreviousClubs[@i].Goals" class="form-control" /></td>
                                <td><input asp-for="Input.PreviousClubs[@i].CleanSheets" class="form-control" /></td>
                            </tr>
                        }
                    </tbody>
                </table>
                <button type="button" class="btn btn-secondary" onclick="addPreviousClubRow()">Add Club</button>
            </div>

            <button type="submit" class="btn btn-primary">Save Profile</button>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        function addPreviousClubRow() {
            var table = document.querySelector('table tbody');
            var row = document.createElement('tr');
            var rowCount = table.rows.length;
            row.innerHTML = `
                        <td><input name="Input.PreviousClubs[${rowCount}].ClubName" class="form-control" /></td>
                        <td><input name="Input.PreviousClubs[${rowCount}].YearFrom" class="form-control" /></td>
                        <td><input name="Input.PreviousClubs[${rowCount}].YearTo" class="form-control" /></td>
                        <td><input name="Input.PreviousClubs[${rowCount}].Appearances" class="form-control" /></td>
                        <td><input name="Input.PreviousClubs[${rowCount}].Goals" class="form-control" /></td>
                        <td><input name="Input.PreviousClubs[${rowCount}].CleanSheets" class="form-control" /></td>
                    `;
            table.appendChild(row);
        }
    </script>
}
